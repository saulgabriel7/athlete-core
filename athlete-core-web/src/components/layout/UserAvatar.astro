---
/**
 * ATHLETE CORE - User Avatar Component
 * Avatar do usu√°rio com design premium
 */

import { getInitials } from '../../utils/formatters';

interface Props {
  src?: string | null;
  name?: string | null;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  class?: string;
}

const {
  src,
  name,
  size = 'md',
  class: className = '',
} = Astro.props;

const classes = [
  'avatar',
  `avatar-${size}`,
  className,
].filter(Boolean).join(' ');

const initials = getInitials(name);
---

<div class={classes}>
  <div class="avatar-glow"></div>
  <div class="avatar-inner">
    {src ? (
      <img src={src} alt={name || 'Avatar'} />
    ) : (
      <span class="avatar-placeholder">{initials}</span>
    )}
  </div>
</div>

<style>
  .avatar {
    position: relative;
    border-radius: var(--radius-full);
  }

  .avatar-glow {
    position: absolute;
    inset: -3px;
    border-radius: inherit;
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-secondary) 100%);
    opacity: 0;
    transition: opacity var(--transition-fast);
    z-index: 0;
  }

  .avatar:hover .avatar-glow {
    opacity: 0.5;
  }

  .avatar-inner {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    overflow: hidden;
    background: var(--color-background-elevated);
    border: 2px solid var(--color-border);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: border-color var(--transition-fast);
    z-index: 1;
  }

  .avatar:hover .avatar-inner {
    border-color: var(--color-border-hover);
  }

  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .avatar-placeholder {
    font-weight: var(--font-weight-semibold);
    color: var(--color-foreground-muted);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wide);
  }

  /* Sizes */
  .avatar-sm {
    width: 32px;
    height: 32px;
  }

  .avatar-sm .avatar-placeholder {
    font-size: var(--font-size-xs);
  }

  .avatar-md {
    width: 40px;
    height: 40px;
  }

  .avatar-md .avatar-placeholder {
    font-size: var(--font-size-sm);
  }

  .avatar-lg {
    width: 64px;
    height: 64px;
  }

  .avatar-lg .avatar-placeholder {
    font-size: var(--font-size-lg);
  }

  .avatar-xl {
    width: 96px;
    height: 96px;
  }

  .avatar-xl .avatar-placeholder {
    font-size: var(--font-size-2xl);
  }
</style>
